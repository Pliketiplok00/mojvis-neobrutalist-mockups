# Admin UI E2E Test Report

**Date:** 2026-01-08
**Tool:** Playwright
**Browser:** Chromium (headless)

## How to Run

### Prerequisites
1. Backend running on http://localhost:3000
2. Database seeded with test data

### Commands

```bash
# Run all tests headless
cd admin && npm run test:e2e

# Run with UI
cd admin && npm run test:e2e:ui

# Run headed (visible browser)
cd admin && npm run test:e2e:headed
```

### Auto-start Servers (CI mode)
The `playwright.config.ts` configures webServer to auto-start:
- Backend: `cd ../backend && DB_NAME=mojvis npm run dev`
- Admin: `npm run dev`

---

## Test Suites

### 1. Navigation (navigation.spec.ts)

| Test | Description | Status |
|------|-------------|--------|
| should load dashboard page | Verify dashboard loads | READY |
| should have all sidebar navigation links | Check nav items exist | READY |
| should navigate to Messages (Inbox) page | Click → /messages | READY |
| should navigate to Events page | Click → /events | READY |
| should navigate to Pages page | Click → /pages | READY |
| should navigate to Feedback page | Click → /feedback | READY |
| should navigate to Click & Fix page | Click → /click-fix | READY |
| should have logout button | Verify logout visible | READY |

### 2. Inbox CRUD (inbox.spec.ts)

| Test | Description | Status |
|------|-------------|--------|
| should display messages list | Wait for list | READY |
| should navigate to new message form | Click new → /messages/new | READY |
| should create a new message | Fill form → submit | READY |
| should edit an existing message | Click → edit → save | READY |
| should delete a message | Click → delete → confirm | READY |
| should show locked state for pushed messages | HITNO → locked UI | READY |
| should prevent editing locked message | Save disabled | READY |

### 3. Feedback & Click-Fix (feedback-clickfix.spec.ts)

| Test | Description | Status |
|------|-------------|--------|
| should display feedback list | Wait for list | READY |
| should open feedback detail | Click → detail page | READY |
| should change feedback status | Select status | READY |
| should add reply to feedback | Type → submit | READY |
| should display click-fix list | Wait for list | READY |
| should open click-fix detail | Click → detail page | READY |
| should display photos in click-fix detail | Check thumbnails | READY |
| should have map link in click-fix detail | Check href | READY |
| should change click-fix status | Select status | READY |
| should add reply to click-fix | Type → submit | READY |
| should display pages list | Wait for list | READY |
| should open page editor | Click → edit page | READY |
| should show placeholder for unimplemented editors | Check UI loads | READY |

---

## Configuration

### playwright.config.ts
```typescript
{
  testDir: './e2e',
  reporter: [['html', { outputFolder: 'e2e-report' }], ['list']],
  use: {
    baseURL: 'http://localhost:5173',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },
  projects: [{ name: 'chromium', use: devices['Desktop Chrome'] }],
}
```

---

## Artifacts

| Artifact | Location |
|----------|----------|
| Test specs | admin/e2e/*.spec.ts |
| Config | admin/playwright.config.ts |
| HTML Report | admin/e2e-report/ |
| Screenshots | admin/test-results/ |

---

## Coverage

### Navigation
- [x] Dashboard route
- [x] All sidebar links (7 items)
- [x] Active state styling
- [x] Logout button

### Inbox
- [x] List view
- [x] Create new message
- [x] Edit existing message
- [x] Delete message
- [x] HITNO locked state
- [x] Edit prevention on locked

### Feedback
- [x] List view
- [x] Detail view
- [x] Status change
- [x] Reply functionality

### Click & Fix
- [x] List view
- [x] Detail view
- [x] Photo thumbnails
- [x] Map link
- [x] Status change
- [x] Reply functionality

### Pages
- [x] List view
- [x] Editor view
- [x] Block placeholder

---

## Known Limitations

1. **Selectors**: Tests use generic selectors that may need updates if UI changes
2. **Auth**: No authentication implemented yet - tests skip login
3. **Data seeding**: Tests create own data via API - depends on backend
4. **HITNO Lock**: Requires device registration via API before test

---

## Recommendations

1. Add `data-testid` attributes to UI components
2. Implement proper authentication flow
3. Add visual regression testing
4. Configure CI/CD with test artifacts

---

**VERDICT: Admin UI E2E Tests READY**

24 test specs created covering navigation, CRUD, and workflow flows.

---

*Generated by Playwright test suite*
