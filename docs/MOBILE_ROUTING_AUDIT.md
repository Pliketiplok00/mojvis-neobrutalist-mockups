# Mobile Routing Audit

**Date:** 2026-01-08
**App:** MOJ VIS Mobile (React Native + Expo)

## Route Graph Overview

### Root Navigator

| Route | Component | Description |
|-------|-----------|-------------|
| Onboarding | OnboardingNavigator | First launch flow |
| Main | MainNavigator | Post-onboarding app |

### Onboarding Stack

| Route | Component | Status | Phase |
|-------|-----------|--------|-------|
| LanguageSelection | LanguageSelectionScreen | IMPLEMENTED | Phase 0 |
| UserModeSelection | UserModeSelectionScreen | IMPLEMENTED | Phase 0 |
| MunicipalitySelection | MunicipalitySelectionScreen | IMPLEMENTED | Phase 0 |

### Main Stack (Post-Onboarding)

| Route | Component | Params | Status | Phase |
|-------|-----------|--------|--------|-------|
| Home | HomeScreen | - | IMPLEMENTED | Phase 0 |
| TransportHub | TransportHubScreen | - | IMPLEMENTED | Phase 4 |
| RoadTransport | RoadTransportScreen | - | IMPLEMENTED | Phase 4 |
| RoadLineDetail | RoadLineDetailScreen | lineId: string | IMPLEMENTED | Phase 4 |
| SeaTransport | SeaTransportScreen | - | IMPLEMENTED | Phase 4 |
| SeaLineDetail | SeaLineDetailScreen | lineId: string | IMPLEMENTED | Phase 4 |
| Events | EventsScreen | - | IMPLEMENTED | Phase 2 |
| EventDetail | EventDetailScreen | eventId: string | IMPLEMENTED | Phase 2 |
| Inbox | InboxListScreen | - | IMPLEMENTED | Phase 1 |
| InboxDetail | InboxDetailScreen | messageId: string | IMPLEMENTED | Phase 1 |
| FeedbackForm | FeedbackFormScreen | - | IMPLEMENTED | Phase 5 |
| FeedbackConfirmation | FeedbackConfirmationScreen | feedbackId: string | IMPLEMENTED | Phase 5 |
| FeedbackDetail | FeedbackDetailScreen | feedbackId: string | IMPLEMENTED | Phase 5 |
| ClickFixForm | ClickFixFormScreen | - | IMPLEMENTED | Phase 6 |
| ClickFixConfirmation | ClickFixConfirmationScreen | clickFixId: string | IMPLEMENTED | Phase 6 |
| ClickFixDetail | ClickFixDetailScreen | clickFixId: string | IMPLEMENTED | Phase 6 |
| StaticPage | StaticPageScreen | slug: string | IMPLEMENTED | Phase 3 |
| Settings | SettingsScreen | - | IMPLEMENTED | Phase 0 |

---

## Menu Overlay Items

| Label (HR) | Label (EN) | Route | Status |
|------------|------------|-------|--------|
| Pocetna | Home | Home | IMPLEMENTED |
| Vozni red | Transport | TransportHub | IMPLEMENTED |
| Dogadaji | Events | Events | IMPLEMENTED |
| Pristiglo | Inbox | Inbox | IMPLEMENTED |
| Postavke | Settings | Settings | IMPLEMENTED |

---

## Phase Requirements Mapping

### Phase 0: Onboarding
- [x] Language selection (HR/EN)
- [x] User mode selection (Visitor/Local)
- [x] Municipality selection (Vis/Komiza for locals)
- [x] Settings screen
- [x] Menu overlay with navigation

### Phase 1: Inbox & Banners
- [x] Inbox list screen
- [x] Inbox detail screen with messageId param
- [x] Banner display (integrated in Home/Inbox)
- [x] Deep link support for push notifications (InboxDetail)

### Phase 2: Events
- [x] Events list screen
- [x] Event detail screen with eventId param
- [x] Event reminders (backend only)

### Phase 3: Static Pages
- [x] Static page screen with slug param
- [x] Block rendering (text, highlight, etc.)

### Phase 4: Transport
- [x] Transport hub screen
- [x] Road transport lines list
- [x] Road line detail with departures
- [x] Sea transport lines list
- [x] Sea line detail with departures

### Phase 5: Feedback
- [x] Feedback form screen
- [x] Feedback confirmation screen
- [x] Feedback detail screen (in Sent tab)
- [x] Rate limiting (3/day)

### Phase 6: Click & Fix
- [x] Click & Fix form screen
- [x] Photo capture/upload
- [x] Location picker
- [x] Confirmation screen
- [x] Detail screen (in Sent tab)

### Phase 7: Push Notifications
- [x] Device registration route (backend)
- [x] Deep link to InboxDetail from push
- [x] Push token management

---

## Deep Link Routing

### Push Notification Payload
```typescript
{
  inbox_message_id: string
}
```

### Deep Link Handler
When app receives push notification with `inbox_message_id`:
1. App is opened/foregrounded
2. Navigation resolves to `InboxDetail` route
3. `messageId` param is set from payload

### Route Resolution
```
Push payload: { inbox_message_id: "abc-123" }
  â†’ Navigate to: InboxDetail({ messageId: "abc-123" })
```

---

## Missing/Placeholder Routes

| Route | Status | Notes |
|-------|--------|-------|
| Search | NOT IMPLEMENTED | Not in Phase 0-7 spec |
| Profile | NOT IMPLEMENTED | Not in Phase 0-7 spec |
| Notifications | NOT IMPLEMENTED | Push handled via deep link |

---

## Summary

| Category | Implemented | Placeholder | Total |
|----------|-------------|-------------|-------|
| Onboarding | 3 | 0 | 3 |
| Main Stack | 18 | 0 | 18 |
| Menu Items | 5 | 0 | 5 |

**Total Routes:** 21 implemented, 0 placeholders

All routes from Phase 0-7 requirements are implemented.

---

*Generated by mobile routing audit script*
