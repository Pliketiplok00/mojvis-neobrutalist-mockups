# Maestro Flow: Onboarding Language Selection
#
# Captures screenshot of the Language Selection screen on fresh app launch.
# This is the first screen shown when the app has no onboarding data.
#
# Prerequisites:
# - App must be in fresh state (uninstall/reinstall or clear data)
# - iOS Simulator must be booted
#
# Output:
#   - a1_app_launch.png (diagnostic - captures whatever state app is in)
#   - onboarding_language_selection.png (after assertions pass)

appId: com.mojvis.app

---

# Clear app state to ensure fresh onboarding
- clearState

# Launch the app
- launchApp:
    clearState: true

# Wait for app to render (give it time to show something)
- extendedWaitUntil:
    visible:
      id: ".*"
    timeout: 10000
    optional: true

# DIAGNOSTIC: Capture app state immediately after launch
# This ALWAYS produces a screenshot regardless of what the app shows
# (error screen, loading, or actual UI)
- takeScreenshot: a1_app_launch

# Now attempt to verify Language Selection screen
# Using optional: true so flow continues even if assertion fails
- extendedWaitUntil:
    visible:
      text: "Dobrodo≈°li / Welcome"
    timeout: 8000
    optional: true

# Small delay for UI to fully render
- extendedWaitUntil:
    visible:
      text: "Hrvatski"
    timeout: 5000
    optional: true

# Take final screenshot of whatever is visible
- takeScreenshot: onboarding_language_selection
